# 漫画翻译器使用说明 📚

## 🎯 完整的漫画翻译解决方案

这个应用整合了之前所有分散的功能，提供一个完整的GUI界面来处理漫画翻译。

## 🚀 启动应用

```bash
python comic_translator_app.py
```

应用启动后会显示一个图形界面，包含：
- **左侧控制面板**: 所有操作按钮和设置
- **右侧图片区域**: 显示图片和检测结果

## 📋 完整操作流程

### 第1步：加载图片 📸
1. 点击 **"选择图片"** 按钮
2. 选择你的漫画图片文件
3. 图片会显示在右侧区域

### 第2步：AI检测对话框 🤖
1. 点击 **"AI检测对话框"** 按钮
2. 等待AI分析（会显示进度条）
3. 检测到的对话框会用绿色边框标出
4. 左侧列表显示所有检测结果

### 第3步：手动调整（如果需要）✏️

**如果AI检测不准确，你可以：**

**添加遗漏的对话框：**
1. 点击 **"添加区域"** 按钮
2. 在图片上点击并拖拽画出矩形框
3. 松开鼠标完成添加

**删除错误的检测：**
1. 在左侧列表中选择错误的区域
2. 点击 **"删除选中"** 按钮

**清除所有重新开始：**
- 点击 **"清除所有"** 按钮

### 第4步：翻译对话 🌐
1. 在左侧列表中选择一个检测区域
2. 查看 **"原文"** 框中的英文文本
3. 如果识别错误，可以手动修改原文
4. 点击 **"AI翻译"** 按钮自动翻译
5. 在 **"译文"** 框中查看翻译结果
6. 如果翻译不满意，可以手动修改
7. 点击 **"应用翻译"** 保存翻译

**重复步骤4，直到所有对话框都翻译完成**

### 第5步：保存结果 💾
1. 点击 **"保存结果"** 按钮
2. 选择保存位置和文件名
3. 系统会保存两个文件：
   - `.json` 文件：包含所有数据
   - `_annotated.jpg` 文件：带标注的图片

## 🎮 界面操作技巧

### 图片操作
- **选择检测框**: 直接点击图片上的绿色框
- **查看选中**: 选中的框会变成红色
- **滚动查看**: 使用滚动条查看大图片

### 快捷操作
- **批量检测**: 先完成所有检测，再逐个翻译
- **实时预览**: 所有操作都会实时显示在图片上
- **文本编辑**: 可以随时修改原文和译文

## ⚠️ 重要提示

### 首次使用前
1. **确保API密钥已设置**：在 `config.py` 中设置你的 OpenRouter API 密钥
2. **检查网络连接**：AI功能需要网络连接
3. **安装依赖包**：确保安装了所有必需的Python包

### 使用过程中
- **耐心等待AI处理**：AI检测和翻译需要时间
- **检查检测结果**：AI可能会误检，需要手动调整
- **保存工作进度**：及时保存结果避免丢失

## 🔧 解决常见问题

### 问题1：应用无法启动
**解决方案：**
```bash
pip install opencv-python pillow requests tkinter
```

### 问题2：AI检测失败
**可能原因：**
- API密钥未设置或错误
- 网络连接问题
- 图片格式不支持

**解决方案：**
1. 检查 `config.py` 中的API密钥
2. 确认网络连接正常
3. 使用支持的图片格式（JPG, PNG等）

### 问题3：检测结果不准确
**这是正常现象！解决方案：**
1. 使用 **"删除选中"** 移除错误检测
2. 使用 **"添加区域"** 手动添加遗漏的对话框
3. 手动调整比AI更准确

### 问题4：翻译质量不好
**解决方案：**
1. 在 **"原文"** 框中修正识别错误
2. 在 **"译文"** 框中手动编辑翻译
3. 重新点击 **"AI翻译"** 获取新翻译

## 📊 输出文件说明

### JSON文件内容
```json
{
  "image_path": "原图片路径",
  "detections": [
    {
      "box_2d": [x1, y1, x2, y2],    // 检测框坐标
      "text_content": "英文原文",     // 原始英文
      "translated_text": "中文译文", // 翻译结果
      "type": "dialogue"             // 类型标识
    }
  ]
}
```

### 标注图片
- 绿色边框标识所有检测区域
- 序号标识每个区域
- 可用于验证检测结果

## 🎉 使用建议

### 提高效率
1. **先完成所有检测调整**，再开始翻译
2. **批量处理相似内容**，提高一致性
3. **保存中间结果**，避免重复工作

### 提高质量
1. **仔细检查AI检测结果**，手动调整不准确的地方
2. **修正原文识别错误**，确保翻译基础正确
3. **根据语境调整翻译**，保持对话自然

---

🎊 **现在你已经掌握了完整的使用方法，开始翻译你的漫画吧！**

如果遇到问题，请检查：
1. API密钥设置
2. 网络连接
3. 依赖包安装
4. 图片文件格式
